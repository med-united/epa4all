server:
  http_listen_port: 3102

positions:
  filename: /tmp/positions.yaml

clients:
  - url: http://host.docker.internal:3100/loki/api/v1/push

scrape_configs:
  - job_name: "epa4all"
#    stdin: {}

    syslog:
      listen_address: "0.0.0.0:4560"
      idle_timeout: 300s
      labels:
        job: epa4all
        source: "socket"

#    file_sd_configs:
#      - files:
#          - /tmp/quarkus-logs

#    static_configs:
#      - targets:
#          - localhost
#        labels:
#          job: epa4all
#          __path__: /tmp/quarkus-logs
    
    pipeline_stages:
      - json:
          expressions:
            time: '"@timestamp"'
            level: level
            exception:
      - json:
          expressions:
            exception_class:
          source: exception
      - labels:
          level:
          exception_class:
      - timestamp:
          format: RFC3339
          source: time
          location: Europe/Berlin
      - labeldrop:
          - time